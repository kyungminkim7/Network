set(manifest "${CMAKE_BINARY_DIR}/install_manifest.txt")

if(NOT EXISTS "${manifest}")
    message(FATAL_ERROR "Cannot find install manifest: ${manifest}")
endif()

# Delete all files in install manifest
file(STRINGS "${manifest}" files)

message("Removing files:")
foreach(file ${files})
    message(" - ${file}")
endforeach()

file(REMOVE ${files})

# Delete package-specific directories
file(REMOVE_RECURSE "@CMAKE_INSTALL_PREFIX@/lib/cmake/@install_package_PACKAGE@")

foreach(includeDir @install_package_INCLUDE_DIRS@)
    file(REMOVE_RECURSE "@CMAKE_INSTALL_PREFIX@/${includeDir}")
endforeach()
